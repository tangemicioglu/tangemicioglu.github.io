---
layout: archive
title: "Projects"
permalink: /projects/
author_profile: false
---

{% include base_path %}
{% capture written_year %}'None'{% endcapture %}
{% assign projects = (site.projects | sort: 'date') | reverse %}
{% assign category = projects | map: 'category' | uniq | sort %}
{% assign tags = projects | map: 'tags' | join: ','  | split: ',' | uniq | sort %}
<p class="page__taxonomy">
  <details open>
    <summary>Filter by category:</summary>
    {% for category in categories %}
      <button class="page__taxonomy-item" category="{{ category }}" onclick="categoryClicked(this)"> {{ category }} </button>
    {% endfor %}
  </details>
  <details>
    <summary>Filter by tag:</summary>
    {% for tag in tags %}
      <button class="page__taxonomy-item" tag="{{ tag }}" onclick="tagClicked(this)"> {{ tag }} </button>
    {% endfor %}
  </details>
</p>

{% for post in projects %}
  {% capture year %}{{ post.date | date: '%Y' }}{% endcapture %}
  {% if year != written_year %}
    <h2 id="{{ year | slugify }}" class="archive__subtitle">{{ year }}</h2>
    {% capture written_year %}{{ year }}{% endcapture %}
  {% endif %}
  {% include archive-single.html %}
{% endfor %}

<!-- Credit to mmpataki for parts of this script -->

<script>

var posts = {
  {% for post in projects %}
    "{{post.title}}": {
      category: "{{post.category}}",
      tags: [
        {% assign firstTag = true %}
        {% for tag in post.tags %}
          {% if firstTag == false %},{% endif %}
          {% assign firstTag = false %}
          "{{tag}}"
        {% endfor %}
      ]
    },
  {% endfor %}
};

var tags = {
  {% assign firstTag = true %}
  {% for tag in tags %}
      {% if firstTag == false %},{% endif %}
      {% assign firstTag = false %}
      "{{tag[0]}}": {
        selected: false,
        pages: [
          {% assign firstPage = true %}
          {% for post in tag[1] %}
            {% if firstPage == false %},{% endif %}
            {% assign firstPage = false %}
            {
              title: "{{post.title}}"
            }
          {% endfor %}
        ]
      }
  {% endfor %}
};

var post_elements = document.getElementsByClassName("list__item")

console.log(post_elements)
console.log(posts)
console.log(tags)

// try {
//   var selectedTags = new URL(location).searchParams.get("tags").split(",");
//   for(selectedTag in selectedTags) {
//     var tag = selectedTags[selectedTag]
//     if (tag in tags) {
//       tags[tag].selected = true
//     }
//   }
// } catch {

// }

function tagClicked(element) {
  if(element.hasClass("page__taxonomy-item-selected")) {
    element.removeClass("page__taxonomy-item-selected")
  } else {
    element.addClass("page__taxonomy-item-selected")
  }
}
  
</script>


